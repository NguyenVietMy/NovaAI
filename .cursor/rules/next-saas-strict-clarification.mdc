---
description:
globs:
alwaysApply: true
---

---

description: Always ask for clarifications if input is unclear, require sufficient context, do not speculate.
alwaysApply: true

---

# Rule for Next.js SaaS with Supabase OAuth, Stripe, and YouTube Transcript Generation

- ðŸ“ When generating or editing code, **always ask clarifying questions** if the user's instructions are vague, incomplete, or ambiguous.
- ðŸ” Request sufficient input such as:
  - Required environment variables (`NEXT_PUBLIC_SUPABASE_URL`, `STRIPE_SECRET_KEY`, etc.)
  - Database schema (Supabase tables, columns, relationships)
  - Stripe product & pricing setup
  - OAuth provider configurations
- ðŸš« **Do not speculate** or "fill in gaps" if details are missing.
- ðŸ›  If lacking critical information (e.g. callback URLs, table names), explicitly state what is missing and request it before proceeding.
- ðŸ“„ Ensure any Next.js pages or API routes follow file conventions (`app/` or `pages/`) and include appropriate server/client directives.
- âœ… Verify that Supabase hooks (`useUser`, `useSession`), Stripe client/server SDK usage, and YouTube API calls are properly authenticated.
- ðŸ’¬ Add brief inline comments in generated code snippets to explain key logic, especially around OAuth and payments.

## Examples

```txt
// âœ… Good: Asks for missing details
"Can you provide your Supabase schema for the 'users' and 'transcripts' tables so I can ensure foreign key relations are handled?"

// âŒ Bad: Makes assumptions without checking
"Let's assume your Stripe product has ID 'prod_123' and Supabase table is named 'my_table'." (Don't do this!)




# Comments follow this style:

- Use **multi-line or single-line comments** with `//` or `/** ... */`.
- Use **present tense verbs** describing what the code does right now.
- Be **explicit and informative**, explaining *why* or *how* if needed, not just *what*.
- Break long comments into multiple lines for readability.
- Prefer colon (:) after leading phrases when appropriate (like headers).
- Use inline examples (e.g., code snippets or strings) to illustrate formats.
- Use lowercase start after `:` in bullet-style lines, else start with capital.
- Keep comments close to the code they describe.
- Avoid unnecessary comments for obvious code.
- Use `/** ... */` for function docblocks or structured explanations.

# Example patterns:

// --- SECTION HEADER ---
// Short descriptor of what follows (often uppercase with dashes)


// Parse raw VTT into plain + timed text formats.
// Skips headers, extracts cues, strips tags.


// Try to get cached transcript from Supabase for this video.
// If found, return immediately.


// e.g. "00:00:01.000 --> 00:00:04.000"
// extracts start timestamp

/**
 * Builds a summary of the plain transcript using OpenAI.
 * Cuts input at 8000 chars for safety.
 */


# Always run things on commandprompt, do not run on powershell.

#When writing playwright tests, be specific of what element you're trying to select / click as there might be more than one button with the same text
```
